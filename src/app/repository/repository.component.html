<div class="container">
  <form #reposFilterForm="ngForm" novalidate>
    <table>
      <tr>
        <td>
          <b>Filter by topics</b>
        </td>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <td>
          <b>Filter by name</b>
        </td>
      </tr>
      <tr>
        <td>
          <div class="multiselect">
            <div class="selectBox" (click)="showCheckboxes()">
              <select class="form-control">
                <option>Select topics</option>
              </select>
              <div class="overSelect"></div>
            </div>
            <div id="checkboxes" [(ngModel)]="selectedTopics" name="selectedTopics"
              (ngModelChange)="getSelectedTopics($event)">
              <!--[ngValue]="topic"-->
              <span *ngFor="let topic of topics">
                <input type="checkbox">&nbsp;{{ topic.name }}
                <br>
              </span>
            </div>
          </div>
        </td>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <td>
          <input class="form-control" type="text" [(ngModel)]="nameFilter" name="nameFilter" (ngModelChange)="filter()"
            placeholder="Type a name">
        </td>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <td>
          <button class="btn btn-primary" (click)="filterRepos(selectedTopics)">Filter</button>
        </td>
      </tr>
    </table>
  </form>
</div>
<br><br>

<div class="container">
  <form #reposManagementForm="ngForm" novalidate>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Name</th>
          <th>Topics</th>
          <th>Description</th>
          <th>Website</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let repo of filteredRepos | paginate: {
                    itemsPerPage: itemsPerPage,
                    currentPage: currentPage
                  }">
          <td><a href="{{ repo.name }}" routerLink="{{ repo.name }}">{{ repo.name }}</a></td>
          <td>
            <span *ngFor="let topic of repo.topics; last as isLast">{{ topic }}<span *ngIf="!isLast">, </span></span>
          </td>
          <td>{{ repo.description }}</td>
          <td><a href="{{ repo.url }}" target="_blank">{{ repo.url }}</a></td>
        </tr>
      </tbody>
    </table>

    <pagination-controls (pageChange)="currentPage = $event" maxSize="5" directionLinks="true" autoHide="true">
    </pagination-controls>

    <table class="table table-striped">
      <tr>
        <td>Current Page</td>
        <td>{{ currentPage }}</td>
      </tr>
      <tr>
        <td>Repositories per page</td>
        <td>
          <input type="number" [(ngModel)]="itemsPerPage" name="itemsPerPage" min=1 pattern="^[0-9]$">
        </td>
      </tr>
      <tr>
        <td>Repositories found</td>
        <td>{{ filteredRepos.length }}</td>
      </tr>
    </table>
  </form>
</div>